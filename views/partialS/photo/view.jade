//
   Created by lucavgobbi on 4/4/15.

form(name='form', novalidate=)
    div(class='container')
        div(class='row')
            p(class='navbar-text')
                a(class='btn btn-success', ng-click='savePhoto()')
                    i(class='fa fa-save')  Save photo
        div(class='row')
            alert(ng-repeat='alert in alerts', type='{{alert.type}}', close='closeAlert($index)') {{alert.msg}}
        div(class='row')
            div(class='col-md-6')
                div(class='form-group', ng-class='{ "has-error": form.title.$error.required }')
                    label Title
                    input(ng-model='photo.title', name='title', class='form-control', placeholder='Title', required)
                    div(ng-show='form.title.$error.required') Title is required
                div(class='form-group')
                    label Short Description
                    input(ng-model='photo.shortDescription', class='form-control', placeholder='Short Description')
                div(class='form-group')
                    label Description
                    input(ng-model='photo.description', class='form-control', placeholder='Description')
                div(class='form-group')
                    label Date Taken
                    p(class='input-group')
                        input(ng-model='photo.dateTaken', class='form-control', datepicker-popup='{{format}}', is-open='opened', show-button-bar='false', ng-required='true')
                        span(class='input-group-btn')
                            button(class='btn btn-default', type='button', ng-click='openDatePicker($event)')
                                i(class='fa fa-calendar')
                div(class='panel panel-default')
                    div(class='panel-heading')
                        h3(class='panel-title') Albums
                            div(class='pull-right')
                                a(class='btn btn-sm btn-default', ng-click='openAlbumDialog()')
                                    i(class='fa fa-plus')  Add to album
                            div(class='clearfix')
                    div(class='panel-body')
                        table(class='table')
                            thead
                                tr
                                    th
                                    th
                            tbody
                                tr(ng-repeat='album in photo.albums')
                                    td {{ album }}
                                    td
                                        a(class='pull-right btn btn-sm btn-danger', ng-click='removePhotoFromAlbum(album)')
                                            i(class='fa fa-remove')  Remove

            div(class='col-md-6')
                div(class='form-group', ng-class='{ "has-error": form.url.$error.required }')
                    label Photo URL
                    input(ng-model='photo.url', name='url', class='form-control', placeholder='Photo URL', required)
                    div(ng-show='form.url.$error.required') URL is required
                    img(ng-src='{{photo.url}}', class='full-width')

        // Album Dialog Modal
        div(class='modal fade', id='albumDialog', role='dialog')
            div(class='modal-dialog')
                div(class='modal-content')
                    div(class='modal-header')
                        h3(class='modal-title') Add photo to album
                    div(class='modal-body')
                        input(class='form-control', type='text', ng-model='albumToAdd', typeahead='album as album._id for album in albums | filter:{_id: $viewValue} | limitTo:8')
                    div(class='modal-footer')
                        button(class='btn btn-sm btn-success', ng-click='addPhotoToAlbum()') Add to {{ albumToAdd._id }}
